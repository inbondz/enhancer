<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Inbondz Research Nexus | Ultimate</title>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        /* =========================================
           CORE SYSTEM VARIABLES
           ========================================= */
        :root {
            --brand: #9EA3A3;
            --brand-dark: #7a7e7e;
            --brand-light: #b8bcbc;
            --bg: #ffffff;
            --text: #050505;
            --text-sec: #555555;
            --surface: #f4f6f8;
            --surface-hover: #eef0f2;
            --border: #e0e0e0;
            --shadow: 0 4px 20px rgba(0,0,0,0.05);
            --font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            --font-mono: "SF Mono", "Monaco", "Inconsolata", "Fira Mono", monospace;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg: #050505;
                --text: #ffffff;
                --text-sec: #aaaaaa;
                --surface: #111111;
                --surface-hover: #1a1a1a;
                --border: #333333;
                --shadow: 0 4px 20px rgba(0,0,0,0.4);
            }
        }

        /* =========================================
           GLOBAL RESET & TYPOGRAPHY
           ========================================= */
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: var(--font-main);
            min-height: 100vh;
            display: flex; flex-direction: column;
            overflow-x: hidden;
            transition: background-color 0.3s ease;
        }

        a { text-decoration: none; color: inherit; }
        button { cursor: pointer; font-family: inherit; }

        /* =========================================
           HEADER ARCHITECTURE
           ========================================= */
        header {
            position: sticky; top: 0; z-index: 900;
            background: rgba(var(--bg), 0.95);
            border-bottom: 1px solid var(--border);
            padding: 18px 25px;
            display: flex; align-items: center; justify-content: center;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
        }

        .brand-logo {
            font-weight: 900;
            font-size: 1.4rem;
            letter-spacing: -0.5px;
            color: var(--text);
            text-transform: uppercase;
            position: absolute; left: 50%; transform: translateX(-50%);
            transition: 0.3s;
        }
        .brand-logo:hover { letter-spacing: 1px; color: var(--brand); }

        /* =========================================
           GEMINI MENU ANIMATION (HEAVY CSS)
           ========================================= */
        .menu-trigger {
            position: absolute; right: 25px;
            background: transparent; border: none;
            width: 34px; height: 24px;
            display: flex; flex-direction: column;
            justify-content: space-between; align-items: flex-end;
            z-index: 1200; cursor: pointer;
        }

        .m-line {
            height: 2px; background: var(--brand);
            border-radius: 4px; transition: all 0.4s cubic-bezier(0.86, 0, 0.07, 1);
        }
        .m-line:nth-child(1) { width: 100%; }
        .m-line:nth-child(2) { width: 65%; } /* The Signature Inbondz Alignment */
        .m-line:nth-child(3) { width: 100%; }

        .menu-trigger:hover .m-line:nth-child(2) { width: 100%; }
        
        /* Active State */
        .menu-trigger.active .m-line:nth-child(1) { transform: rotate(45deg) translate(6px, 9px); width: 100%; background: var(--text); }
        .menu-trigger.active .m-line:nth-child(2) { opacity: 0; transform: translateX(20px); }
        .menu-trigger.active .m-line:nth-child(3) { transform: rotate(-45deg) translate(6px, -9px); width: 100%; background: var(--text); }

        /* =========================================
           MAIN SEARCH INTERFACE
           ========================================= */
        .hero-section {
            padding: 60px 20px 30px;
            max-width: 900px; margin: 0 auto; width: 100%;
            display: flex; flex-direction: column; gap: 20px;
        }

        .search-wrapper {
            position: relative; width: 100%;
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: 16px;
            padding: 8px;
            display: flex; align-items: center;
            transition: all 0.3s ease;
            box-shadow: var(--shadow);
        }
        .search-wrapper:focus-within {
            border-color: var(--brand);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(158, 163, 163, 0.15);
        }

        #mainInput {
            flex: 1; border: none; background: transparent;
            padding: 15px 20px; font-size: 1.2rem; font-weight: 700;
            color: var(--text); outline: none;
        }

        .action-btn {
            background: var(--brand); color: #fff;
            border: none; padding: 15px 30px;
            border-radius: 10px; font-weight: 900; font-size: 1rem;
            transition: 0.2s; box-shadow: 0 4px 10px rgba(158, 163, 163, 0.4);
        }
        .action-btn:hover { transform: scale(1.05); background: var(--brand-dark); }
        .action-btn:active { transform: scale(0.95); }

        /* =========================================
           TABS & NAVIGATION
           ========================================= */
        .nav-tabs {
            display: flex; gap: 10px; overflow-x: auto;
            padding: 10px 0; border-bottom: 1px solid var(--border);
            margin-bottom: 30px; max-width: 1200px; margin: 0 auto; width: 90%;
            -ms-overflow-style: none; scrollbar-width: none;
        }
        .nav-tabs::-webkit-scrollbar { display: none; }

        .tab-btn {
            background: transparent; border: 1px solid var(--border);
            padding: 8px 18px; border-radius: 50px;
            color: var(--text-sec); font-size: 0.85rem; font-weight: 700;
            white-space: nowrap; transition: 0.2s;
        }
        .tab-btn:hover { border-color: var(--brand); color: var(--text); }
        .tab-btn.active { background: var(--brand); color: #fff; border-color: var(--brand); }

        /* =========================================
           RESULTS DASHBOARD
           ========================================= */
        #dashboard {
            max-width: 1200px; margin: 0 auto; width: 100%; padding: 0 20px 100px;
        }

        /* LIVE CARDS */
        .live-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px; margin-bottom: 60px;
        }

        .card {
            background: var(--surface); border: 1px solid var(--border);
            border-radius: 12px; padding: 24px; display: flex; flex-direction: column;
            transition: 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative; overflow: hidden;
        }
        .card:hover {
            transform: translateY(-5px); border-color: var(--brand);
            box-shadow: var(--shadow);
        }
        
        .card::before {
            content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%;
            background: var(--brand); opacity: 0; transition: 0.3s;
        }
        .card:hover::before { opacity: 1; }

        .c-meta { display: flex; justify-content: space-between; margin-bottom: 12px; font-size: 0.75rem; font-weight: 800; letter-spacing: 1px; color: var(--brand); text-transform: uppercase; }
        .c-title { font-size: 1.3rem; font-weight: 800; margin-bottom: 10px; line-height: 1.2; }
        .c-desc { font-size: 0.95rem; line-height: 1.6; color: var(--text-sec); flex: 1; margin-bottom: 20px; }
        
        .c-footer {
            display: flex; gap: 10px; border-top: 1px solid rgba(0,0,0,0.05); padding-top: 15px;
        }
        
        .icon-btn {
            background: transparent; border: 1px solid var(--border);
            width: 36px; height: 36px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            color: var(--text-sec); transition: 0.2s;
        }
        .icon-btn:hover { border-color: var(--brand); color: var(--brand); }
        .icon-btn svg { width: 16px; height: 16px; fill: currentColor; }

        .open-btn {
            flex: 1; background: var(--text); color: var(--bg);
            border: none; border-radius: 6px; font-weight: 700; font-size: 0.8rem;
            display: flex; align-items: center; justify-content: center; transition: 0.2s;
        }
        .open-btn:hover { opacity: 0.8; }

        /* =========================================
           DEEP MATRIX (LISTS)
           ========================================= */
        .matrix-block { margin-bottom: 50px; animation: slideUp 0.6s ease; }
        .matrix-head { 
            font-size: 1.1rem; font-weight: 900; color: var(--text); 
            margin-bottom: 20px; display: flex; align-items: center; gap: 10px;
        }
        .matrix-head::before { content: ''; width: 20px; height: 4px; background: var(--brand); border-radius: 2px; }

        .links-wrapper { display: flex; flex-wrap: wrap; gap: 10px; }
        
        .deep-chip {
            background: var(--bg); border: 1px solid var(--border);
            padding: 10px 18px; border-radius: 8px; font-size: 0.9rem; font-weight: 600;
            color: var(--text-sec); transition: 0.15s; cursor: pointer;
        }
        .deep-chip:hover {
            background: var(--brand); color: #fff; border-color: var(--brand);
            transform: translateY(-2px);
        }

        /* =========================================
           VAULT (SAVED ITEMS)
           ========================================= */
        .empty-vault {
            text-align: center; padding: 60px; color: var(--text-sec);
            border: 2px dashed var(--border); border-radius: 20px;
        }

        /* =========================================
           DRAWER & PAGES
           ========================================= */
        .sys-drawer {
            position: fixed; top: 0; right: 0; width: 100%; height: 100vh;
            background: var(--bg); z-index: 1000;
            padding: 100px 40px; display: flex; flex-direction: column; gap: 20px;
            transform: translateX(100%); transition: transform 0.5s cubic-bezier(0.7, 0, 0.3, 1);
        }
        .sys-drawer.active { transform: translateX(0); }

        .drawer-link {
            font-size: 2.5rem; font-weight: 900; color: var(--text-sec);
            transition: 0.3s; cursor: pointer;
        }
        .drawer-link:hover, .drawer-link.active { color: var(--brand); transform: translateX(20px); }

        .page-container {
            display: none; padding: 40px 20px; max-width: 800px; margin: 0 auto;
        }
        .page-container.active { display: block; animation: fadeIn 0.5s ease; }

        .legal-block h2 { font-size: 2rem; color: var(--brand); margin-bottom: 20px; font-weight: 900; }
        .legal-block p { line-height: 1.8; margin-bottom: 15px; font-weight: 500; }

        /* Profile */
        .profile-container { text-align: center; }
        .p-img { width: 140px; height: 140px; border-radius: 50%; border: 4px solid var(--brand); padding: 4px; object-fit: cover; margin-bottom: 20px; }
        
        /* =========================================
           UTILITIES
           ========================================= */
        .loader-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg); z-index: 2000; display: flex; align-items: center; justify-content: center;
            flex-direction: column; transition: opacity 0.5s;
        }
        .loader-text { font-family: var(--font-mono); font-weight: 700; color: var(--brand); letter-spacing: 2px; margin-top: 20px; }
        .spinner { width: 50px; height: 50px; border: 5px solid var(--surface); border-top-color: var(--brand); border-radius: 50%; animation: spin 0.8s linear infinite; }

        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .hidden { display: none !important; }
        .no-results { text-align: center; padding: 50px; opacity: 0.5; font-weight: 800; letter-spacing: 1px; }

    </style>
</head>
<body>

    <div id="sysLoader" class="loader-overlay">
        <div class="spinner"></div>
        <div class="loader-text">INITIALIZING INBONDZ NEXUS...</div>
    </div>

    <header>
        <div class="brand-logo">INBONDZ SEARCH</div>
        <button class="menu-trigger" onclick="toggleSystemMenu()">
            <span class="m-line"></span><span class="m-line"></span><span class="m-line"></span>
        </button>
    </header>

    <div class="sys-drawer" id="sysDrawer">
        <div class="drawer-link active" onclick="route('home')">NEXUS</div>
        <div class="drawer-link" onclick="route('vault')">VAULT <span style="font-size:1rem; vertical-align:middle; background:var(--brand); color:white; padding:2px 8px; border-radius:4px;" id="vaultCountMenu">0</span></div>
        <div class="drawer-link" onclick="route('terms')">TERMS</div>
        <div class="drawer-link" onclick="route('privacy')">PRIVACY</div>
        <div class="drawer-link" onclick="route('contact')">CONTACT</div>
    </div>

    <main id="home" class="page-container active" style="max-width: 100%;">
        
        <div class="hero-section">
            <div class="search-wrapper">
                <input type="text" id="searchInput" placeholder="Search the Deep Matrix...">
                <button class="action-btn" onclick="executeSearch()">SEARCH</button>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="tab-btn active" onclick="filterView('all')">ALL STREAMS</button>
            <button class="tab-btn" onclick="filterView('live')">LIVE INTEL</button>
            <button class="tab-btn" onclick="filterView('academic')">ACADEMIC</button>
            <button class="tab-btn" onclick="filterView('social')">SOCIAL</button>
            <button class="tab-btn" onclick="filterView('tech')">TECH / DEV</button>
            <button class="tab-btn" onclick="filterView('media')">MEDIA</button>
            <button class="tab-btn" onclick="filterView('files')">FILES</button>
        </div>

        <div id="dashboard">
            <div class="no-results" id="placeholder">
                <h1>READY</h1>
                <p>ACCESS 300+ DATABASES INSTANTLY</p>
            </div>
        </div>

    </main>

    <main id="vault" class="page-container">
        <div class="legal-block">
            <h2>Inbondz Vault</h2>
            <p>Your locally stored research bookmarks. Data persists in your browser.</p>
        </div>
        <div id="vaultGrid" class="live-grid">
            </div>
        <button onclick="clearVault()" class="action-btn" style="background:var(--border); color:var(--text);">CLEAR VAULT</button>
    </main>

    <main id="terms" class="page-container">
        <div class="legal-block">
            <h2>Terms of Service</h2>
            <p><strong>1. Federated Search Protocol:</strong> Inbondz Research Nexus acts solely as an aggregator. We do not host, own, or control the content displayed from external APIs (Wikipedia, PubMed, GitHub, etc.).</p>
            <p><strong>2. User Responsibility:</strong> By using the "Deep Matrix" links, you acknowledge that you are leaving our secure environment to visit third-party domains. We are not liable for external privacy practices.</p>
            <p><strong>3. Usage:</strong> This tool is free for educational and research purposes.</p>
        </div>
    </main>

    <main id="privacy" class="page-container">
        <div class="legal-block">
            <h2>Privacy Policy</h2>
            <p><strong>Zero-Log Policy:</strong> We do not store your search queries on any server. All processing happens client-side in your browser.</p>
            <p><strong>Local Storage:</strong> The "Inbondz Vault" feature uses your browser's LocalStorage. This data never leaves your device.</p>
        </div>
    </main>

    <main id="contact" class="page-container">
        <div class="profile-container">
            <img src="https://unavatar.io/twitter/skwasimx" class="p-img" onerror="this.src='https://ui-avatars.com/api/?name=SW&background=9EA3A3&color=fff'">
            <h2 style="font-weight:900; font-size:2rem; margin-bottom:10px;">Sk Wasim</h2>
            <p style="color:var(--text-sec); margin-bottom:30px;">Co-Founder & Lead Architect</p>
            <a href="https://wasim.inbondz.com" target="_blank" class="action-btn">VISIT PROFILE</a>
        </div>
    </main>

    <script>
        // --- 1. SYSTEM INIT ---
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('sysLoader').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('sysLoader').classList.add('hidden');
                }, 500);
            }, 800); // Fake heavy loading feel
            updateVaultCount();
        });

        // --- 2. ROUTING & STATE ---
        const state = {
            view: 'home',
            filter: 'all',
            vault: JSON.parse(localStorage.getItem('inbondzVault')) || []
        };

        function toggleSystemMenu() {
            document.querySelector('.menu-trigger').classList.toggle('active');
            document.getElementById('sysDrawer').classList.toggle('active');
        }

        function route(pageId) {
            document.querySelectorAll('.page-container').forEach(el => el.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            
            // Update Menu UI
            document.querySelectorAll('.drawer-link').forEach(el => el.classList.remove('active'));
            // Close Drawer
            toggleSystemMenu();

            if(pageId === 'vault') renderVault();
        }

        function filterView(filter) {
            state.filter = filter;
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            
            // Logic to hide/show sections based on filter
            // Simple implementation: Toggle display of classes
            const live = document.getElementById('liveSection');
            const matrix = document.getElementById('matrixSection');
            
            if(filter === 'all') {
                if(live) live.style.display = 'block';
                if(matrix) matrix.style.display = 'block';
            } else if (filter === 'live') {
                if(live) live.style.display = 'block';
                if(matrix) matrix.style.display = 'none';
            } else {
                // For deep links, we would filter the matrix categories
                if(live) live.style.display = 'none';
                if(matrix) {
                    matrix.style.display = 'block';
                    // Advanced: hide specific categories (Simplified for single file)
                }
            }
        }

        // --- 3. SEARCH ENGINE CORE ---
        const searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('keypress', (e) => { if(e.key === 'Enter') executeSearch(); });

        async function executeSearch() {
            const query = searchInput.value.trim();
            if(!query) return;

            const dashboard = document.getElementById('dashboard');
            dashboard.innerHTML = `<div style="text-align:center; padding:50px; color:var(--brand); font-weight:900;">QUERYING 300+ NODES...</div>`;

            // A. FETCH LIVE INTEL (Tier 1)
            const liveData = await fetchLiveIntel(query);
            
            // B. GENERATE MATRIX (Tier 2)
            const matrixHTML = generateDeepMatrix(query);

            // C. RENDER
            renderDashboard(liveData, matrixHTML);
        }

        // --- 4. API AGGREGATOR (Tier 1) ---
        async function fetchLiveIntel(q) {
            const results = [];
            
            // Helper for safe fetch
            const safeFetch = async (url, parser, type) => {
                try {
                    const res = await fetch(url);
                    const json = await res.json();
                    const parsed = parser(json);
                    parsed.forEach(p => results.push({ ...p, type }));
                } catch(e) { console.log(`Error fetching ${type}`); }
            };

            // 1. Wikipedia
            await safeFetch(
                `https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=${q}&format=json&origin=*&limit=3`,
                (d) => d.query.search.map(i => ({
                    title: i.title,
                    desc: i.snippet.replace(/<[^>]*>?/gm, '') + '...',
                    link: `https://en.wikipedia.org/?curid=${i.pageid}`,
                    source: 'Wikipedia'
                })), 'ACADEMIC'
            );

            // 2. OpenLibrary
            await safeFetch(
                `https://openlibrary.org/search.json?q=${q}&limit=2`,
                (d) => d.docs.map(i => ({
                    title: i.title,
                    desc: `Author: ${i.author_name?.[0] || 'Unknown'} (${i.first_publish_year || 'N/A'})`,
                    link: `https://openlibrary.org${i.key}`,
                    source: 'OpenLibrary'
                })), 'BOOKS'
            );

            // 3. CoinGecko
            await safeFetch(
                `https://api.coingecko.com/api/v3/search?query=${q}`,
                (d) => d.coins.slice(0, 2).map(i => ({
                    title: `${i.name} (${i.symbol})`,
                    desc: `Market Rank #${i.market_cap_rank}`,
                    link: `https://www.coingecko.com/en/coins/${i.id}`,
                    source: 'CoinGecko'
                })), 'FINANCE'
            );

            // 4. iTunes
            await safeFetch(
                `https://itunes.apple.com/search?term=${q}&media=music&entity=song&limit=2`,
                (d) => d.results.map(i => ({
                    title: i.trackName,
                    desc: `Artist: ${i.artistName}`,
                    link: i.trackViewUrl,
                    source: 'Apple Music'
                })), 'MEDIA'
            );

            // 5. NPM
            await safeFetch(
                `https://registry.npmjs.org/-/v1/search?text=${q}&size=2`,
                (d) => d.objects.map(i => ({
                    title: i.package.name,
                    desc: i.package.description,
                    link: i.package.links.npm,
                    source: 'NPM'
                })), 'CODE'
            );
            
            // 6. Dictionary
            await safeFetch(
                `https://api.dictionaryapi.dev/api/v2/entries/en/${q}`,
                (d) => Array.isArray(d) ? [{
                    title: d[0].word,
                    desc: d[0].meanings[0].definitions[0].definition,
                    link: '#',
                    source: 'Dictionary'
                }] : [], 'DEF'
            );

            return results;
        }

        // --- 5. DEEP MATRIX GENERATOR (Tier 2 - The Heavy Data) ---
        function generateDeepMatrix(q) {
            const e = encodeURIComponent(q);
            // MASSIVE OBJECT MAPPING
            const categories = {
                "Academic & Science": [
                    {n:"Google Scholar", u:`https://scholar.google.com/scholar?q=${e}`}, {n:"PubMed", u:`https://pubmed.ncbi.nlm.nih.gov/?term=${e}`},
                    {n:"JSTOR", u:`https://www.jstor.org/action/doBasicSearch?Query=${e}`}, {n:"ArXiv", u:`https://arxiv.org/search/?query=${e}`},
                    {n:"ResearchGate", u:`https://www.researchgate.net/search?q=${e}`}, {n:"ScienceDirect", u:`https://www.sciencedirect.com/search?qs=${e}`},
                    {n:"Microsoft Academic", u:`https://academic.microsoft.com/search?q=${e}`}, {n:"WorldCat", u:`https://www.worldcat.org/search?q=${e}`},
                    {n:"Springer", u:`https://link.springer.com/search?query=${e}`}, {n:"Wiley Online", u:`https://onlinelibrary.wiley.com/action/doSearch?AllField=${e}`},
                    {n:"NASA Technical", u:`https://ntrs.nasa.gov/search?q=${e}`}, {n:"ERIC", u:`https://eric.ed.gov/?q=${e}`}
                ],
                "Social & People": [
                    {n:"Twitter/X", u:`https://twitter.com/search?q=${e}`}, {n:"Reddit", u:`https://www.reddit.com/search/?q=${e}`},
                    {n:"LinkedIn", u:`https://www.linkedin.com/search/results/all/?keywords=${e}`}, {n:"Facebook", u:`https://www.facebook.com/search/top?q=${e}`},
                    {n:"Instagram", u:`https://www.instagram.com/explore/tags/${e.replace(/%20/g,'')}/`}, {n:"Pinterest", u:`https://www.pinterest.com/search/pins/?q=${e}`},
                    {n:"Tumblr", u:`https://www.tumblr.com/search/${e}`}, {n:"Quora", u:`https://www.quora.com/search?q=${e}`},
                    {n:"Mastodon", u:`https://mastodon.social/search?q=${e}`}, {n:"TikTok", u:`https://www.tiktok.com/search?q=${e}`},
                    {n:"Snapchat", u:`https://www.snapchat.com/explore/${e.replace(/%20/g,'')}`}, {n:"Telegram", u:`https://telegram.me/s/${e.replace(/%20/g,'')}`}
                ],
                "Dev & Tech": [
                    {n:"GitHub", u:`https://github.com/search?q=${e}`}, {n:"StackOverflow", u:`https://stackoverflow.com/search?q=${e}`},
                    {n:"HackerNews", u:`https://hn.algolia.com/?q=${e}`}, {n:"ProductHunt", u:`https://www.producthunt.com/search?q=${e}`},
                    {n:"Docker Hub", u:`https://hub.docker.com/search?q=${e}`}, {n:"PyPI", u:`https://pypi.org/search/?q=${e}`},
                    {n:"NPM", u:`https://www.npmjs.com/search?q=${e}`}, {n:"Dev.to", u:`https://dev.to/search?q=${e}`},
                    {n:"HuggingFace", u:`https://huggingface.co/models?search=${e}`}, {n:"Kaggle", u:`https://www.kaggle.com/search?q=${e}`},
                    {n:"GitLab", u:`https://gitlab.com/search?search=${e}`}, {n:"Bitbucket", u:`https://bitbucket.org/repo/all?name=${e}`}
                ],
                "Media & Files": [
                    {n:"YouTube", u:`https://www.youtube.com/results?search_query=${e}`}, {n:"Vimeo", u:`https://vimeo.com/search?q=${e}`},
                    {n:"Spotify", u:`http://open.spotify.com/search/${e}`}, {n:"SoundCloud", u:`https://soundcloud.com/search?q=${e}`},
                    {n:"Twitch", u:`https://www.twitch.tv/search?term=${e}`}, {n:"Dailymotion", u:`https://www.dailymotion.com/search/${e}`},
                    {n:"PDF Drive", u:`https://www.pdfdrive.com/search?q=${e}`}, {n:"Internet Archive", u:`https://archive.org/search.php?query=${e}`},
                    {n:"Unsplash", u:`https://unsplash.com/s/photos/${e}`}, {n:"Giphy", u:`https://giphy.com/search/${e}`},
                    {n:"SlideShare", u:`https://www.slideshare.net/search/slideshow?q=${e}`}, {n:"Flickr", u:`https://www.flickr.com/search/?text=${e}`}
                ],
                "News & Business": [
                    {n:"Google News", u:`https://news.google.com/search?q=${e}`}, {n:"Bloomberg", u:`https://www.bloomberg.com/search?query=${e}`},
                    {n:"Reuters", u:`https://www.reuters.com/site-search/?query=${e}`}, {n:"Forbes", u:`https://www.forbes.com/search/?q=${e}`},
                    {n:"CNN", u:`https://www.cnn.com/search?q=${e}`}, {n:"BBC", u:`https://www.bbc.co.uk/search?q=${e}`},
                    {n:"TechCrunch", u:`https://search.techcrunch.com/search?p=${e}`}, {n:"The Verge", u:`https://www.theverge.com/search?q=${e}`},
                    {n:"Wall St Journal", u:`https://www.wsj.com/search?query=${e}`}, {n:"Financial Times", u:`https://www.ft.com/search?q=${e}`}
                ],
                "Shopping": [
                    {n:"Amazon", u:`https://www.amazon.com/s?k=${e}`}, {n:"eBay", u:`https://www.ebay.com/sch/i.html?_nkw=${e}`},
                    {n:"AliExpress", u:`https://www.aliexpress.com/wholesale?SearchText=${e}`}, {n:"Walmart", u:`https://www.walmart.com/search?q=${e}`},
                    {n:"Etsy", u:`https://www.etsy.com/search?q=${e}`}, {n:"Target", u:`https://www.target.com/s?searchTerm=${e}`},
                    {n:"Craigslist", u:`https://www.craigslist.org/search/sss?query=${e}`}, {n:"IKEA", u:`https://www.ikea.com/us/en/search/products/?q=${e}`}
                ]
            };
            
            return categories;
        }

        // --- 6. RENDER LOGIC ---
        function renderDashboard(liveData, categories) {
            const dash = document.getElementById('dashboard');
            dash.innerHTML = '';

            // A. RENDER LIVE SECTION
            if(liveData.length > 0) {
                const liveSec = document.createElement('div');
                liveSec.id = 'liveSection';
                liveSec.innerHTML = `<h3 style="margin-bottom:20px; color:var(--text); font-weight:900;">INBONDZ INTEL</h3>`;
                const grid = document.createElement('div');
                grid.className = 'live-grid';
                
                liveData.forEach((item, index) => {
                    grid.innerHTML += `
                        <div class="card">
                            <div class="c-meta">${item.type} • ${item.source}</div>
                            <div class="c-title">${item.title}</div>
                            <div class="c-desc">${item.desc}</div>
                            <div class="c-footer">
                                <button class="icon-btn" onclick="addToVault('${item.title.replace(/'/g, "")}', '${item.link}')" title="Save to Vault">
                                    <svg viewBox="0 0 24 24"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg>
                                </button>
                                <button class="icon-btn" onclick="copyCitation('${item.title.replace(/'/g, "")}', '${item.link}', '${item.source}')" title="Copy Citation">
                                    <svg viewBox="0 0 24 24"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
                                </button>
                                <a href="${item.link}" target="_blank" class="open-btn">OPEN LINK</a>
                            </div>
                        </div>
                    `;
                });
                liveSec.appendChild(grid);
                dash.appendChild(liveSec);
            }

            // B. RENDER MATRIX SECTION
            const matrixSec = document.createElement('div');
            matrixSec.id = 'matrixSection';
            matrixSec.className = 'matrix-block';
            matrixSec.innerHTML = `<h3 style="margin:40px 0 20px; color:var(--text); font-weight:900;">INBONDZ MATRIX (DEEP WEB)</h3>`;
            
            for(const [cat, links] of Object.entries(categories)) {
                const group = document.createElement('div');
                group.className = 'matrix-block';
                group.innerHTML = `<div class="matrix-head">${cat}</div>`;
                const wrapper = document.createElement('div');
                wrapper.className = 'links-wrapper';
                
                links.forEach(l => {
                    wrapper.innerHTML += `<a href="${l.u}" target="_blank" class="deep-chip">${l.n}</a>`;
                });
                group.appendChild(wrapper);
                matrixSec.appendChild(group);
            }
            dash.appendChild(matrixSec);
        }

        // --- 7. VAULT LOGIC (LOCAL STORAGE) ---
        function addToVault(title, link) {
            const item = { title, link, date: new Date().toLocaleDateString() };
            // Check duplicates
            if(!state.vault.some(i => i.link === link)) {
                state.vault.push(item);
                localStorage.setItem('inbondzVault', JSON.stringify(state.vault));
                updateVaultCount();
                alert('Saved to Inbondz Vault');
            }
        }

        function renderVault() {
            const grid = document.getElementById('vaultGrid');
            grid.innerHTML = '';
            
            if(state.vault.length === 0) {
                grid.innerHTML = `<div class="empty-vault">NO SAVED ITEMS</div>`;
                return;
            }

            state.vault.forEach((item, index) => {
                grid.innerHTML += `
                    <div class="card">
                        <div class="c-meta">SAVED • ${item.date}</div>
                        <div class="c-title">${item.title}</div>
                        <div class="c-footer">
                            <button class="icon-btn" onclick="removeFromVault(${index})" style="color:var(--brand);">
                                <svg viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                            </button>
                            <a href="${item.link}" target="_blank" class="open-btn">OPEN SAVED LINK</a>
                        </div>
                    </div>
                `;
            });
        }

        function removeFromVault(index) {
            state.vault.splice(index, 1);
            localStorage.setItem('inbondzVault', JSON.stringify(state.vault));
            renderVault();
            updateVaultCount();
        }

        function clearVault() {
            if(confirm('Clear entire vault?')) {
                state.vault = [];
                localStorage.setItem('inbondzVault', JSON.stringify(state.vault));
                renderVault();
                updateVaultCount();
            }
        }

        function updateVaultCount() {
            document.getElementById('vaultCountMenu').innerText = state.vault.length;
        }

        // --- 8. CITATION TOOL ---
        function copyCitation(title, link, source) {
            const date = new Date().toLocaleDateString();
            const citation = `${title}. (${date}). Retrieved from ${source}: ${link}`;
            navigator.clipboard.writeText(citation).then(() => alert('Citation Copied (APA format)'));
        }

    </script>
</body>
</html>
